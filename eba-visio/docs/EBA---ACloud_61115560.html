<!DOCTYPE html>
<html>
    <head>
        <title>EBA - ACloud</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            EBA - ACloud
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    
                    <div id="main-content" class="wiki-content group">
                    <p>ACloud stands for &quot;Agnostic Cloud&quot;. Its purpose is to take configuration XML, created using network/VM designs created using <strong>EBA - Visio Physical Design</strong>, or hand crafted (providing the XML conforms to the provider agnostic XML schema, AgnosticCloudConfig-1.0.xsd, found in the UKHomeOffice/EnvironmentBuildAutomation-VisioStencil GitHub repository) and provision them as working, networked VM's in your cloud.</p><p><style type='text/css'>/*<![CDATA[*/
div.rbtoc1455122393645 {padding: 0px;}
div.rbtoc1455122393645 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1455122393645 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1455122393645'>
<ul class='toc-indentation'>
<li><a href='#EBA-ACloud-ProviderAgnosticDataModel'>Provider Agnostic Data Model</a>
<ul class='toc-indentation'>
<li><a href='#EBA-ACloud-CreatingtheEnvironmentDefinitionXMLfile'>Creating the Environment Definition XML file</a></li>
<li><a href='#EBA-ACloud-CreatingtheEnvironmentContainerXMLfile'>Creating the Environment Container XML file</a></li>
</ul>
</li>
<li><a href='#EBA-ACloud-InvokingtheACloudclient'>Invoking the ACloud client</a>
<ul class='toc-indentation'>
<li><a href='#EBA-ACloud-Requirements'>Requirements</a></li>
<li><a href='#EBA-ACloud-Build'>Build</a></li>
<li><a href='#EBA-ACloud-Prepareanexecutionplan'>Prepare an execution plan</a></li>
<li><a href='#EBA-ACloud-Run'>Run</a></li>
<li><a href='#EBA-ACloud-Javadocs'>Javadocs</a></li>
</ul>
</li>
<li><a href='#EBA-ACloud-Configuration'>Configuration</a></li>
<li><a href='#EBA-ACloud-Customisation'>Customisation</a></li>
<li><a href='#EBA-ACloud-FunctionalCoverage'>Functional Coverage</a></li>
</ul>
</div></p><p>The ACloud Client component executes the following high level steps:</p><ul><li>Read in the two XML files (Environment Definition and Container Definition), properties file and single execution plan file - parses them and ensures that they are valid.</li><li>Login to the Cloud API system (Skyscape or AWS using credentials provided) and cache the login credentials for the duration of the jar invocation to be used in subsequent API calls.</li><li>Retrieve the details of the virtual machine container and the virtual environment container that the environment belongs to.</li><li>Iterate over the virtual machine container instructions within the Hosting Environment Execution plan and executes each instruction on each virtual machine container within the Hosting Environment Definition file.</li><li>Iterate over the organisation network instructions within the Hosting Environment Execution plan and executes each instruction on each organisation network within the Hosting Environment Definition file.</li><li>Iterate over the virtual application network instructions within the Hosting Environment Execution plan and executes each instruction on each virtual application network within the Hosting Environment Definition file.</li><li>Iterates over the virtual machine instructions within the Hosting Environment Execution plan and executes each instruction on each virtual machine within the Hosting Environment Definition file.</li></ul><p> </p><p>ACloud does not include Puppet scripts, middleware configuration or application deployments, it is purely the base OS and networking tier. This is illustrated by the blue elements in the conceptual example of building an application environment shown below.</p><p> </p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/61115560/62128986.png" data-image-src="attachments/61115560/62128986.png" data-unresolved-comment-count="0" data-linked-resource-id="62128986" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Automated Component Packaging and Release Control Tooling Design v2.png" data-base-url="https://<confluenceurl>" data-linked-resource-content-type="image/png" data-linked-resource-container-id="61115560" data-linked-resource-container-version="64"></span></p><p> </p><p>In this diagram, an orchestration tool (such as Jenkins) is calling the aCloud client to build a variety of VMs across 2 applications in sequence. You would then need a configuration tool (such as Puppet or similar) to configure the VM's with middleware etc.</p><p>The green &quot;Start&quot; box at the bottom is logically a zeroth step to design the VM setup in Visio as covered in <a href="EBA---Visio-Physical-Design_57512650.html">EBA - Visio Physical Design</a></p><p><span class="confluence-anchor-link" id="EBA-ACloud-Acloud_XSD"></span></p><h2 id="EBA-ACloud-ProviderAgnosticDataModel">Provider Agnostic Data Model</h2><p>The environment definition required by ACloud is consumed as XML conforming to the EBA Provider Agnostic Schema. A physical network design conforming to this schema can be produced using the EBA - Visio Physical Design package.</p><p>The tools currently cater for Skyscape (VMware) and AWS (Amazon Web Services). The following table shows how Amazon Virtual Private Clouds (VPC) and VmWare virtual applications (vApps) fit into the agnostic data model.</p><div class="table-wrap"><table class="confluenceTable"><thead><tr><th class="confluenceTh"><div class="tablesorter-header-inner">Agnostic</div></th><th class="confluenceTh"><div class="tablesorter-header-inner">VMware (Skyscape)</div></th><th class="confluenceTh"><div class="tablesorter-header-inner">Amazon Web Services (AWS)</div></th></tr></thead><tbody><tr><td class="confluenceTd">Environment Container</td><td class="confluenceTd"> </td><td class="confluenceTd">Virtual Private Cloud (VPC)</td></tr><tr><td class="confluenceTd">Virtual Machine Container</td><td class="confluenceTd">vApp</td><td class="confluenceTd"> </td></tr><tr><td class="confluenceTd">Account</td><td class="confluenceTd">Organisation</td><td class="confluenceTd">Account</td></tr></tbody></table></div><p>The EBA Provider Agnostic Schema is defined by the AgnosticCloudConfig-1.0.xsd file, as in the diagram below.</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" src="attachments/61115560/65501381.png" data-image-src="attachments/61115560/65501381.png" data-unresolved-comment-count="0" data-linked-resource-id="65501381" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="AgnosticCloudConfig-minimsed.png" data-base-url="https://<confluenceurl>" data-linked-resource-content-type="image/png" data-linked-resource-container-id="61115560" data-linked-resource-container-version="64"></span></p><p>The root element of this XSD is a &quot;GeographicContainer&quot; which is a high-level over-arching container that represents an entire VM and network estate (e.g. a country-wide datacenter). Within this GeographicContainer there is a set of EnvironmentContainer(s) which represent a set of logically-connected machines (e.g. an entire programme), which have EnvironmentDefinition(s) (e.g. a platform) which has individual Virtual Machines that are instantiated, started/shutdown etc and EnvironmentContainerDefinitions, which represent an organisation's backbone network that connects many Environment Definitions together.</p><p>Note the ACloud takes in 2 XML files corresponding to this AgnosticCloudConfig-1.0.xsd schema; one file representing the Environment Definitions and one file representing the Environment Container Definitions. This is because the Environment Container Definitions for the backbone networks should change rarely and carefully, whereas the Environment Definitions should change much more frequently.</p><p>The expanded diagram looks like this (click to enlarge);</p><p> </p><p> </p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" src="attachments/61115560/65501382.png" data-image-src="attachments/61115560/65501382.png" data-unresolved-comment-count="0" data-linked-resource-id="65501382" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="AgnosticCloudConfig-overall.png" data-base-url="https://<confluenceurl>" data-linked-resource-content-type="image/png" data-linked-resource-container-id="61115560" data-linked-resource-container-version="64"></span></p><p> </p><h3 id="EBA-ACloud-CreatingtheEnvironmentDefinitionXMLfile">Creating the Environment Definition XML file</h3><p>This file is populated with the environment definition element of the schema. Its purpose is to hold an environment design, in agnostic terms referred to as a Virtual Machine Container, containing the VM definitions and the application networks that link them; this set of elements is shown in the &quot;EnvironmentDefinition&quot; element in the diagram below. It does not include the organisation networks that link VMC's together and to the outside world. This file is generated by using the &quot;Export Virtual Machine Container&quot; button in the Visio Export tool.</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" src="attachments/61115560/65501380.png" data-image-src="attachments/61115560/65501380.png" data-unresolved-comment-count="0" data-linked-resource-id="65501380" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="AgnosticCloudConfig-EnvironmentDefinition.png" data-base-url="https://<confluenceurl>" data-linked-resource-content-type="image/png" data-linked-resource-container-id="61115560" data-linked-resource-container-version="64"></span></p><p> </p><h3 id="EBA-ACloud-CreatingtheEnvironmentContainerXMLfile">Creating the Environment Container XML file</h3><p>This file is populated with the environment container element of the schema. Its purpose is to hold the organisation networks that link Virtual Machine Containers together; this set of elements is shown in the &quot;EnvironmentContainerDefinition&quot; element in the diagram below. The VMC or &quot;Environment Definition&quot; aspect of the design is not populated in this file. This file is generated by using the &quot;Export Organisation Network&quot; button in the Visio Export tool.</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" src="attachments/61115560/65501432.png" data-image-src="attachments/61115560/65501432.png" data-unresolved-comment-count="0" data-linked-resource-id="65501432" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="AgnosticCloudConfig-EnvironmentContainer.png" data-base-url="https://<confluenceurl>" data-linked-resource-content-type="image/png" data-linked-resource-container-id="61115560" data-linked-resource-container-version="64"></span></p><h2 id="EBA-ACloud-InvokingtheACloudclient">Invoking the ACloud client<br /><br /></h2><h3 style="margin-left: 0.0px;" id="EBA-ACloud-Requirements">Requirements</h3><ul><li><p><strong>JDK 7</strong>:<br />JDK 7 is required to build and run ACloud.</p></li><li><p><strong>Maven 3</strong>:<br />Maven is used to resolve the external dependencies during the build process. Usually comes pre-packaged with IDEs. However if you intend to do build outside your IDE or continuous integration tool, you might download it directly from the relevant Apache website.</p></li><li><p><strong>Dependencies</strong>:<br />In order to build the code, you will need to obtain and install the following artifacts into your local Maven repository.</p><ul><li>vcloud-java-sdk-5.5.0.jar<ul><li>Instructions:<ul><li><a href="https://my.vmware.com/group/vmware/get-download?downloadGroup=VCDSDKJAVA550" class="external-link" rel="nofollow">Download</a> the resource named vCloud SDK for Java (filename is &quot;VMware-vCloudDirector-JavaSDK-5.5.0-1294395.zip&quot;) which contains the relevant jar.</li><li>Run the following command to install the 3rd party JAR to your local Maven repository:<br /><code>mvn
 install:install-file -Dfile=[PathToTheJAR]/vcloud-java-sdk-5.5.0.jar 
-DgroupId=com.vmware -DartifactId=vcloud-java-sdk -Dversion=5.5.0 
-Dpackaging=jar -DgeneratePom=true</code></li></ul></li></ul></li></ul><ul><li>rest-api-schemas-5.5.0.jar<ul><li>Instructions:<ul><li>Use the same zip file downloaded in Step-1, which contains this jar as well.</li><li>Run the following command to install the 3rd party JAR to your local Maven repository:<br /><code>mvn
 install:install-file -Dfile=[PathToTheJAR]/rest-api-schemas-5.5.0.jar 
-DgroupId=com.vmware -DartifactId=rest-api-schemas -Dversion=5.5.0 
-Dpackaging=jar -DgeneratePom=true</code></li></ul></li></ul></li></ul></li></ul><ul><li><strong>Cloud Provider Account</strong>:<br />Naturally, an AWS or SkyScape account is needed to provision environments via cloud. Please make sure the cloud provider profile that you will use in ACloud has relevant permissions for the actions you would like to perform, i.e. create/delete VMs etc.</li></ul><h3 id="EBA-ACloud-Build">Build</h3><p>Use your IDE, continuous integration tool or java command line utilities to run a &quot;maven install&quot;. The process should generate executable files inside the directory &quot;aCloudClient/target/appassembler/bin/&quot;</p><h3 id="EBA-ACloud-Prepareanexecutionplan">Prepare an execution plan</h3><p>You will need to create an execution plan to instruct the ACloud Client of what it is to do with the environment definition. There are a range of options available, such as create all VMs, or confirm if the specified VMs exists etc. You may follow this link for the details of crafting <span style="color: rgb(51,51,51);"><a href="EBA---Sample-Execution-Plans_63242319.html">Execution Plans</a></span>.</p><p>There are also some sample Execution Plans that you can use out of the box for the common actions. For instance, the file<code> &quot;aCloudClient\src\test\resources\aws\createAll.xml</code>&quot; can be used for creating VMs in AWS, or  <code>&quot;aCloudClient\src\test\resources\skyscape\deleteEnvironment.xml</code>&quot; can be used to delete a vApp in a Skyscape platform.</p><h3 id="EBA-ACloud-Run">Run</h3><p>To run the ACloud client and turn an Environment Definition file into working VM's, you need to invoke the AgnosticClientCLI class and pass in your config values,  execution plan and environment definition XML files as produced from Visio (see <a href="EBA---Visio-Physical-Design_57512650.html">EBA - Visio Physical Design</a>).</p><p><em>Network Layout file</em> (<code>-networkLayout</code> option) refers to the XML generated by clicking the &quot;Export Organisation Network&quot; button in the Visio Export Tool, and the <em>Environment Definition file<strong> (</strong></em><code>-environments</code> option<strong>)</strong> refers to the XML generated by clicking the &quot;Export Virtual Machine Container&quot; button.</p><p>Prerequisites:</p><ul style="list-style-type: square;"><li>Make sure the cloud provider account (AWS or Skyscape) that you want to use in ACloud has relevant permissions for the actions you would like to perform, i.e. create/delete VMs etc.</li><li>For AWS, create a keypair named &quot;<em>mykeypair</em>&quot; through the EC2 Console at AWS website (<a href="https://console.aws.amazon.com/" class="external-link" rel="nofollow">https://console.aws.amazon.com/</a>), in the same region as you would like to work on. </li></ul><p>Below are three different ways of launching the ACloud client.</p><ol><li><strong>Manual invocation</strong>, via the command line as follows:<ol><li>AWS:<br /><pre style="margin-left: 30.0px;"><code>cd {PROJECT_HOME}  

Edit the file &quot;aCloudClient\src\test\resources\aws\aws-test-config.properties&quot; and enter your AWS &quot;Access Key ID&quot; and &quot;Secret Access Key&quot; values into the parameters named &quot;user&quot; and &quot;password&quot; 
<br />#Confirm that the test resources<code> (VMs and VPCs)</code> don't exist yet
aCloudClient\target\appassembler\bin\acloud-app -command execute -config aCloudClient\src\test\resources\aws\aws-test-config.properties -networkLayout aCloudClient\src\test\resources\aws\testNetworkLayout.xml -environments aCloudClient\src\test\resources\aws\testEnvironmentDefinition.xml -executionplan aCloudClient\src\test\resources\aws\confirmAllNotExistVapp.xml<br /><br /></code></pre><pre style="margin-left: 30.0px;"><code>#Create the test resources on AWS cloud <br />aCloudClient\target\appassembler\bin\acloud-app -command execute -config aCloudClient\src\test\resources\aws\aws-test-config.properties -networkLayout aCloudClient\src\test\resources\aws\testNetworkLayout.xml -environments aCloudClient\src\test\resources\aws\testEnvironmentDefinition.xml -executionplan aCloudClient\src\test\resources\aws\createAll.xml<br /></code></pre><pre style="margin-left: 30.0px;"><code><br /></code></pre><pre style="margin-left: 30.0px;"><code>#Confirm that the test resources exist
aCloudClient\target\appassembler\bin\acloud-app -command execute -config aCloudClient\src\test\resources\aws\aws-test-config.properties -networkLayout aCloudClient\src\test\resources\aws\testNetworkLayout.xml -environments aCloudClient\src\test\resources\aws\testEnvironmentDefinition.xml -executionplan aCloudClient\src\test\resources\aws\confirmAllVapp.xml<br /></code></pre><pre style="margin-left: 30.0px;"><code><br /></code></pre><pre style="margin-left: 30.0px;"><code>#Delete the test resources from AWS cloud<br />aCloudClient\target\appassembler\bin\acloud-app -command execute -config aCloudClient\src\test\resources\aws\aws-test-config.properties -networkLayout aCloudClient\src\test\resources\aws\testNetworkLayout.xml -environments aCloudClient\src\test\resources\aws\testEnvironmentDefinition.xml -executionplan aCloudClient\src\test\resources\aws\deleteEnvironment.xml<br />
</code></pre></li><li>Skyscape:<br /><pre style="margin-left: 30.0px;"><code>cd {PROJECT_HOME}  

Edit the file &quot;aCloudClient\src\test\resources\skyscape\vmware-test-config.properties&quot; and enter all the relevant information
<br /></code></pre><pre style="margin-left: 30.0px;"><code>#Create the test resources on Skyscape cloud<br />aCloudClient\target\appassembler\bin\acloud-app -command execute -config aCloudClient\src\test\resources\<code>skyscape</code>\vmware-test-config.properties -networkLayout aCloudClient\src\test\resources\<code>skyscape</code>\testNetworkLayoutvCloud.xml -environments aCloudClient\src\test\resources\<code>skyscape</code>\testEnvironmentDefinitionvCloud.xml -executionplan aCloudClient\src\test\resources\<code>skyscape</code>\createAll.xml<br /></code></pre><br /><pre style="margin-left: 30.0px;"><code>#Delete the test resources from <code>Skyscape </code>cloud<br />aCloudClient\target\appassembler\bin\acloud-app -command execute -config aCloudClient\src\test\resources\<code><code>skyscape</code></code>\vmware-test-config.properties -networkLayout aCloudClient\src\test\resources\<code>skyscape</code>\testNetworkLayoutvCloud.xml -environments aCloudClient\src\test\resources\<code>skyscape</code>\testEnvironmentDefinitionvCloud.xml -executionplan aCloudClient\src\test\resources\<code>skyscape</code>\deleteEnvironment.xml<br />
</code></pre></li></ol></li><li><strong>Programmatically</strong>, by embedding the ACloud jar (and relevant dependencies) into your project and making calls to the relevant classes. The entry point <span>could be the class &quot;com.ipt.ebsa.AgnosticClientCLI&quot; which has a main() method that handles the command line invocations.</span><br /><br /></li><li><p><strong>Executing the tests</strong> located in the class &quot;com.ipt.ebsa.agnostic.client.CliMultifileImportTest&quot; which will create a sample environment under your AWS account and then destroy it. Before running the tests, you would need to:</p><pre style="margin-left: 30.0px;"><code>Edit the file &quot;aCloudClient\src\test\resources\aws\aws-test-config.properties&quot; and enter your AWS &quot;Access Key ID&quot; and &quot;Secret Access Key&quot; values into the parameters named &quot;user&quot; and &quot;password&quot;, respectively.

Run the tests in &quot;CliMultifileImportTest.java&quot;
</code></pre></li></ol><h3 id="EBA-ACloud-Javadocs">Javadocs</h3><p>Javadocs for the ACloud client can be found <a href="javadocs/index.html" rel="nofollow">here</a>.</p><h2 id="EBA-ACloud-Configuration">Configuration</h2><p>Configuration data may be passed to the AgnosticClientCLI using the &quot;-config &lt;config-file&gt;&quot; option as a single file, or individual command line arguments for each parameter, i.e. &quot;-user MyUserName -password MyPassword -useRoleSwitch N&quot;.</p><p> </p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Parameter</th><th class="confluenceTh">Skyscape</th><th class="confluenceTh">AWS</th><th colspan="1" class="confluenceTh">Purpose</th><th colspan="1" class="confluenceTh">Sample value</th></tr><tr><td colspan="1" class="confluenceTd">useRoleSwitch</td><td colspan="1" class="confluenceTd">n/a</td><td colspan="1" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd">Specifies whether to switch to an  AWS Identity and Access Management (IAM) role that provides temporary access to resources you have specified in your AWS account</td><td colspan="1" class="confluenceTd"><em>Y/N</em></td></tr><tr><td colspan="1" class="confluenceTd">roleArnToSwitchTo</td><td colspan="1" class="confluenceTd">n/a</td><td colspan="1" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd">An AWS Identity and Access Management (IAM) role that you have configured in your AWS account</td><td colspan="1" class="confluenceTd"><em>arn:aws:iam::&lt;your account no&gt;:role/IPT_NPA_EBSAToolingAPI</em></td></tr><tr><td colspan="1" class="confluenceTd">roleSwitchSessionName</td><td colspan="1" class="confluenceTd">n/a</td><td colspan="1" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd">The name to associated with the session in which the ACloud Client will use the IAM role credentials.</td><td colspan="1" class="confluenceTd"><em>&quot;acloudclient&quot;</em></td></tr><tr><td colspan="1" class="confluenceTd">autoRefreshCredentials</td><td colspan="1" class="confluenceTd">n/a</td><td colspan="1" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd">Whether to automatically refresh the IAM data.</td><td colspan="1" class="confluenceTd"><em>Y/N</em></td></tr><tr><td colspan="1" class="confluenceTd">guestCustScriptDir</td><td colspan="1" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd">Directory path to use for where to find the VM Customisation Script (specified in the definition parameter XML file)</td><td colspan="1" class="confluenceTd"><em>src/test/resources/aws</em></td></tr><tr><td colspan="1" class="confluenceTd">region</td><td colspan="1" class="confluenceTd">n/a</td><td colspan="1" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd">The AWS region that you are using to host your cloud infrastructure.</td><td colspan="1" class="confluenceTd"><em>eu-west-1</em></td></tr><tr><td colspan="1" class="confluenceTd">account</td><td colspan="1" class="confluenceTd">n/a</td><td colspan="1" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd">Your AWS account identifier.</td><td colspan="1" class="confluenceTd"><em>&lt;your account id&gt;</em></td></tr><tr><td colspan="1" class="confluenceTd">keyName</td><td colspan="1" class="confluenceTd">n/a</td><td colspan="1" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd">AWS Access Key required for programmatic access through the API.</td><td colspan="1" class="confluenceTd"><em>&lt;AWS Access Key&gt;</em></td></tr><tr><td colspan="1" class="confluenceTd">toolingDomain</td><td colspan="1" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd">The domain used for tooling.</td><td colspan="1" class="confluenceTd"><em>&lt;tooling domain name&gt;</em></td></tr><tr><td colspan="1" class="confluenceTd">searchBootstrapString</td><td colspan="1" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd">Bootstrap string.</td><td colspan="1" class="confluenceTd"><em>&lt;bootstrap string&gt;</em></td></tr><tr><td colspan="1" class="confluenceTd">bootstrapAdditionalTimeout</td><td colspan="1" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd">Time to delay when bootstrapping.</td><td colspan="1" class="confluenceTd"><em>&lt;timeout in seconds&gt;</em></td></tr><tr><td colspan="1" class="confluenceTd">user</td><td colspan="1" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd">The user name used to access your cloud provider - can be supplied as an argument or through the configuration file</td><td colspan="1" class="confluenceTd"><em>&lt;your cloud user name&gt;</em></td></tr><tr><td colspan="1" class="confluenceTd">password</td><td colspan="1" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd">The password used to access your cloud provider - can be supplied as an argument or through the configuration file</td><td colspan="1" class="confluenceTd"><em>&lt;your cloud password&gt;</em></td></tr><tr><td colspan="1" class="confluenceTd">organisation</td><td colspan="1" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd">n/a</td><td colspan="1" class="confluenceTd"><p>The hash id of the organisation that the resources are being created / managed within.</p></td><td colspan="1" class="confluenceTd"><em>&lt;Organisation hash e.g. 9-76-2-fceb14&gt;</em></td></tr><tr><td colspan="1" class="confluenceTd">proxyHost</td><td colspan="1" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd">The fully qualified domain name of the host of the proxy server within the vApp that the vCloud API client has been deployed within</td><td colspan="1" class="confluenceTd"><em>&lt;short host name&gt;.&lt;domain name&gt;</em></td></tr><tr><td colspan="1" class="confluenceTd">proxyPort</td><td colspan="1" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd">The port number of the proxy server provided by the proxyHost setting.</td><td colspan="1" class="confluenceTd"><em>&lt;port number&gt;</em></td></tr><tr><td colspan="1" class="confluenceTd">ProxyScheme</td><td colspan="1" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd">The protocol used</td><td colspan="1" class="confluenceTd"><p><em>&lt;Proxy scheme e.g. http&gt;</em></p></td></tr><tr><td colspan="1" class="confluenceTd">url</td><td colspan="1" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd">n/a</td><td colspan="1" class="confluenceTd">The URL of the VMware vCloud Director API provided by Skyscape.</td><td colspan="1" class="confluenceTd"><a href="https://api.vcd.portal.skyscapecloud.com/" class="external-link" rel="nofollow">https://api.vcd.portal.skyscapecloud.com</a></td></tr><tr><td colspan="1" class="confluenceTd">catalog</td><td colspan="1" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd">n/a</td><td colspan="1" class="confluenceTd">The name of the private Skyscape catalog that contains the VM templates, that are used to instantiate virtual machines from.</td><td colspan="1" class="confluenceTd"><em>&lt;Catalog name e.g. XYZ Prod Catalog&gt;</em></td></tr><tr><td colspan="1" class="confluenceTd">vdc</td><td colspan="1" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd">n/a</td><td colspan="1" class="confluenceTd">The name of the virtual data centre that the resources are being created / managed within.</td><td colspan="1" class="confluenceTd"><em>&lt;vDC name&gt;</em></td></tr><tr><td colspan="1" class="confluenceTd">adminvdc</td><td colspan="1" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd">n/a</td><td colspan="1" class="confluenceTd">The name of the admin virtual data centre that the resources are being created / managed within.</td><td colspan="1" class="confluenceTd"><em>&lt;admin vDC name&gt;</em></td></tr><tr><td colspan="1" class="confluenceTd">edgeGatewayName</td><td colspan="1" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd">n/a</td><td colspan="1" class="confluenceTd">The external (to vApp) name of the Skyscape vShield Edge Gateway to use (behind which our network will be provisioned)</td><td colspan="1" class="confluenceTd"><em>gateway name as it appears to API traffic</em></td></tr><tr><td colspan="1" class="confluenceTd">externalNetworkName</td><td colspan="1" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd">n/a</td><td colspan="1" class="confluenceTd">The name of the Skyscape vShield Edge Gateway as it appears to the vApp being provisioned.</td><td colspan="1" class="confluenceTd"><em>gateway name as it appears to the network in the vApp.</em></td></tr></tbody></table></div><p> </p><h2 id="EBA-ACloud-Customisation">Customisation</h2><p> </p><p>ACloud is designed in a modular way to allow further customisations. One of the points you might be interested in is to plug in your own credentials or password manager to keep the ACloud clean from any sensitive data. </p><p>In order to integrate ACloud with your password store, you only need to add a piece of code to the relevant cloud provider connector classes to retrieve the password from your own password manager and overwrite the value derived from the ACloud context.</p><p>For AWS, you need to inject your password manager integration code into the getPassword() method of the AwsConnector class. Similarly for Skyscape, you need to overwrite the value of the 'password' parameter in the login() method of the SkyscapeConnector class.</p><p>Bear in mind that ACloud uses AspectJ so if you do modify the code and you're not seeing your changes take effect, make sure you have a weave step (otherwise it'll re-use the cached java classes from the aspect class cache).</p><h2 id="EBA-ACloud-FunctionalCoverage">Functional Coverage</h2><p> </p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Feature</th><th class="confluenceTh">Create</th><th colspan="1" class="confluenceTh">Confirm</th><th class="confluenceTh">Update</th><th class="confluenceTh">Delete</th><th colspan="1" class="confluenceTh">Start</th><th colspan="1" class="confluenceTh">Stop</th><th colspan="1" class="confluenceTh">Embedded function</th><th colspan="1" class="confluenceTh">associate</th><th colspan="1" class="confluenceTh">disassociate</th><th colspan="1" class="confluenceTh">Other</th><th class="confluenceTh">Tested</th><th colspan="1" class="confluenceTh">Integration tested with Build Tool</th><th colspan="1" class="confluenceTh">Comment</th></tr><tr><td class="confluenceTd">VIPs</td><td class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">no</td><td class="confluenceTd">yes</td><td class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">n/a</td><td colspan="1" class="confluenceTd"><span>n/a</span></td><td colspan="1" class="confluenceTd">no</td><td colspan="1" class="confluenceTd"><span>n/a</span></td><td colspan="1" class="confluenceTd"><span>n/a</span></td><td colspan="1" class="confluenceTd"> </td><td class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">Deleting a gateway is untested as an individual operation, works if you delete the whole VPC.</td></tr><tr><td class="confluenceTd">Peering</td><td class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">no</td><td class="confluenceTd">no</td><td class="confluenceTd">no</td><td colspan="1" class="confluenceTd"><span>n/a</span></td><td colspan="1" class="confluenceTd"><span>n/a</span></td><td colspan="1" class="confluenceTd">no</td><td colspan="1" class="confluenceTd"><span>n/a</span></td><td colspan="1" class="confluenceTd"><span>n/a</span></td><td colspan="1" class="confluenceTd"> </td><td class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">yes</td><td colspan="1" class="confluenceTd"><p>Can delete a peer if you delete the VPC.</p><p>Peering involves, creating network route tables, adding rooting rules, and updating security groups. We don't update security groups currently as there are no requirements as to how they should work. Currently security groups are all disabled in AWS.</p></td></tr><tr><td class="confluenceTd">VM</td><td class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">yes (exists)</td><td class="confluenceTd">yes</td><td class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">no</td><td colspan="1" class="confluenceTd"><span>n/a</span></td><td colspan="1" class="confluenceTd"><span>n/a</span></td><td colspan="1" class="confluenceTd"> </td><td class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">Sometimes update requires destroying the VM. This occurs when you update resources that AWS does not allow you to change. There is a complex algorithm that controls this and does all the choreography of the least cost path to rebuilding the instance and updating the changes parts.</td></tr><tr><td class="confluenceTd">Roles</td><td class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">no</td><td class="confluenceTd">no</td><td class="confluenceTd">yes</td><td colspan="1" class="confluenceTd"><span>n/a</span></td><td colspan="1" class="confluenceTd"><span>n/a</span></td><td colspan="1" class="confluenceTd">yes (vm)</td><td colspan="1" class="confluenceTd"><span>n/a</span></td><td colspan="1" class="confluenceTd"><span>n/a</span></td><td colspan="1" class="confluenceTd"> </td><td class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">No externalisation for configuration, built on the fly, config only supports VIPs so far. Only get deleted if you delete the VM and its the last VM in the VIP.</td></tr><tr><td class="confluenceTd">Polices</td><td class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">no</td><td class="confluenceTd">no</td><td class="confluenceTd">yes</td><td colspan="1" class="confluenceTd"><span>n/a</span></td><td colspan="1" class="confluenceTd"><span>n/a</span></td><td colspan="1" class="confluenceTd">yes (vm)</td><td colspan="1" class="confluenceTd"><span>n/a</span></td><td colspan="1" class="confluenceTd"><span>n/a</span></td><td colspan="1" class="confluenceTd"> </td><td class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">yes</td><td colspan="1" class="confluenceTd"><span>No externalisation for configuration, built on the fly, config only supports VIPs so far. <span>Only get deleted if you delete the VM and its the last VM in the VIP.</span></span></td></tr><tr><td class="confluenceTd">SubInterfaces</td><td class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">no</td><td class="confluenceTd">yes</td><td class="confluenceTd">yes</td><td colspan="1" class="confluenceTd"><span>n/a</span></td><td colspan="1" class="confluenceTd"><span>n/a</span></td><td colspan="1" class="confluenceTd">yes (vm)</td><td colspan="1" class="confluenceTd"><span>n/a</span></td><td colspan="1" class="confluenceTd"><span>n/a</span></td><td colspan="1" class="confluenceTd"> </td><td class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">Only managed through a VM.</td></tr><tr><td class="confluenceTd">VMC</td><td class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">yes</td><td class="confluenceTd">no</td><td class="confluenceTd">delete</td><td colspan="1" class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">no</td><td colspan="1" class="confluenceTd"><span>n/a</span></td><td colspan="1" class="confluenceTd"><span>n/a</span></td><td colspan="1" class="confluenceTd"> </td><td class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">VAPP, VMC, Security Group are all names that can fit here.</td></tr><tr><td class="confluenceTd">Gateway</td><td class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">yes</td><td class="confluenceTd">yes</td><td class="confluenceTd">yes</td><td colspan="1" class="confluenceTd"><span>n/a</span></td><td colspan="1" class="confluenceTd"><span>n/a</span></td><td colspan="1" class="confluenceTd">no</td><td colspan="1" class="confluenceTd"><span>n/a</span></td><td colspan="1" class="confluenceTd"><span>n/a</span></td><td colspan="1" class="confluenceTd"> </td><td class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">Requires integration with security groups so this is affected by any changes within security groups. Uses hard configured ports, no config is read in to configure these ports.</td></tr><tr><td class="confluenceTd">Tags</td><td class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">no</td><td class="confluenceTd">yes</td><td class="confluenceTd">no</td><td colspan="1" class="confluenceTd"><span>n/a</span></td><td colspan="1" class="confluenceTd"><span>n/a</span></td><td colspan="1" class="confluenceTd">yes</td><td colspan="1" class="confluenceTd"><span>n/a</span></td><td colspan="1" class="confluenceTd"><span>n/a</span></td><td colspan="1" class="confluenceTd"> </td><td class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">Can delete a tag internally, no exposure of feature. No direct access to tags, all through other functions.</td></tr><tr><td class="confluenceTd">VPC Route Tables</td><td class="confluenceTd">n/a</td><td colspan="1" class="confluenceTd">no</td><td class="confluenceTd">yes</td><td class="confluenceTd">no</td><td colspan="1" class="confluenceTd">n/a</td><td colspan="1" class="confluenceTd"><span>n/a</span></td><td colspan="1" class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">no</td><td colspan="1" class="confluenceTd">no</td><td colspan="1" class="confluenceTd"> </td><td class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">Configures Ingress Router for all ip traffic into the VPC. Would be sensible to have some config that allows limiting internet traffic ranges if you wanted to only allow access to a VPC from specific IP ranges / addresses.</td></tr><tr><td class="confluenceTd">Subnet Route Tables</td><td class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">no</td><td class="confluenceTd"> </td><td class="confluenceTd">yes</td><td colspan="1" class="confluenceTd"><span>n/a</span></td><td colspan="1" class="confluenceTd"><span>n/a</span></td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd">yes</td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd">Used for peering updates for routes going to and from org networks in different VPC's.</td></tr><tr><td class="confluenceTd">Elastic IP</td><td class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">no</td><td class="confluenceTd">no</td><td class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">n/a</td><td colspan="1" class="confluenceTd">n/a</td><td colspan="1" class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">yes</td><td colspan="1" class="confluenceTd"> </td><td class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">No exposure to disassociate Elastic IP from VM or to bond a specific IP to a specific VM. Elastic IP can be deleted by deleting the VM it is associated with.</td></tr><tr><td colspan="1" class="confluenceTd">VPC</td><td colspan="1" class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">yes</td><td colspan="1" class="confluenceTd">no</td><td colspan="1" class="confluenceTd">yes</td><td colspan="1" class="confluenceTd"><span>n/a</span></td><td colspan="1" class="confluenceTd"><span>n/a</span></td><td colspan="1" class="confluenceTd">no</td><td colspan="1" class="confluenceTd"><span>n/a</span></td><td colspan="1" class="confluenceTd"><span>n/a</span></td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td></tr></tbody></table></div>
                    </div>

                                        
                    
                 
                </div>             </div> 
            
        </div>     </body>
</html>
