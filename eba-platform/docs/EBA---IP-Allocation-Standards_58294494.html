<!DOCTYPE html>
<html>
    <head>
        <title>EBA - IP Allocation Standards</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            EBA - IP Allocation Standards
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    
                    <div id="main-content" class="wiki-content group">
                    <h2 id="EBA-IPAllocationStandards-Overview">Overview</h2><p>This page documents the IP allocation standards suggested to be used by users of these tools.</p><h2 id="EBA-IPAllocationStandards-Principals">Principals</h2><ol><li>IPv4 private class 'A' IP addresses will be used for all internal addresses within organisations, as they offer the largest range of IP addresses within IPv4   </li><li>The octets within each allocated IP addresses will have a meaning relevant to the context of their use, so that they can be automatically allocated and interpreted</li></ol><h2 id="EBA-IPAllocationStandards-IPAddressAllocation">IP Address Allocation</h2><p>The following items need to be represented within an IP address in order to allow individual VMs to be addressed uniquely:</p><p>An IPv4 class ‘A’ IP address takes the following format: 10.x.x.x  </p><p>The first octet will not be changed - this is to prevent an internal IP address being mistaken for an external IP address (as 10.x.x.x addresses are reserved for Internal addresses only), leaving 3 x 8 bit octets to represent four pieces of information. In order to allocate the address by environment and vLAN the following allocation strategy will be used:</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Octet</th><th class="confluenceTh">Allocation</th></tr><tr><td class="confluenceTd">1st</td><td class="confluenceTd">Always has the value 10</td></tr><tr><td class="confluenceTd">2nd</td><td class="confluenceTd">A number representing the environment (e.g. PRP1, PRP2 )</td></tr><tr><td colspan="1" class="confluenceTd">3rd</td><td colspan="1" class="confluenceTd">A number representing the vLAN within an environment</td></tr><tr><td colspan="1" class="confluenceTd">4th</td><td colspan="1" class="confluenceTd">A number representing a VM, this will be a unique number within the vLAN. Some cloud providers reserve the first IPs in a subnet, therefore start allocating from 11.</td></tr></tbody></table></div><p><strong style="line-height: 1.4285715;"><u>2<u><sup>nd</sup></u> Octet</u></strong></p><p>The environment number is split into the followings ranges:</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Environment Type</th><th class="confluenceTh">Number Range</th></tr><tr><td class="confluenceTd">Edge (organisation routed networks)</td><td class="confluenceTd">0 to 15</td></tr><tr><td class="confluenceTd">Tooling</td><td class="confluenceTd">16 to 31</td></tr><tr><td class="confluenceTd">Other development and test environment</td><td class="confluenceTd">32 to 255</td></tr></tbody></table></div><p><strong style="line-height: 1.4285715;"><u><br /></u></strong></p><p><strong style="line-height: 1.4285715;"><u>3<sup>rd</sup> Octet</u></strong></p><p>The vLAN number is split into the followings ranges:</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Environment Type</th><th class="confluenceTh">Number Range</th></tr><tr><td class="confluenceTd">Application</td><td class="confluenceTd">0 to 127</td></tr><tr><td class="confluenceTd">Management</td><td class="confluenceTd">128 to 255</td></tr></tbody></table></div><p>In a Production environment, each vApp takes an allocation of 16 vLANs. For 'Application', the first would be 0-15, the next 16-31 etc. For 'Management', the first would be 128-143, the next 144-159 etc. Where an isolated southbound vLAN is allocated a range, this is the last address range in the block (e.g. 15, 31, 143, 159 etc).  This allows the allocation of address ranges to maintain a convention of increasing as we go north to south.</p><p>In a Development environment, each vApp takes an allocation of 8 vLANs, rather than 16. For application, the first would be 0-7, 8-15 etc.  For management, the first would be 128-135, 136-143 etc.  As the security requirements for development do not require multiple compartments, the number of vLANs can be safely reduced.  E.g. DEV, CIT and SST have adopted this allocation in order to cater for the increased number of vApps required in Development.</p><p>Within a vApp the address ranges allocated to compartments will increase as the compartment character increases.</p><p> </p><p><strong><u>4<sup>th</sup> Octet</u></strong></p><p>This range is allocated sequentially starting at the owning firewall/router. For server pairs with a VIP, then the VIP has the first address   (i.e.  VIP = 1 , Physical is 2 &amp; 3).  </p><p>For the ...MEBC_TLGx_APP vLAN, the addresses used for connecting environments to tooling are allocated sequentially, starting at 32. </p><h2 id="EBA-IPAllocationStandards-NetworkInterfaceCardAllocation">Network Interface Card Allocation</h2><p>On a virtual machine, the following standards should be used to allocate network cards:</p><p><span style="line-height: 1.4285715;"><strong>NIC0</strong></span></p><p><span style="line-height: 1.4285715;">Will be allocated using the following precedence order:</span></p><ol><li>If there is a management network interface connected to the virtual machine, NIC0 will be allocated to that interface.</li><li>If there is only one network interface connected to the virtual machine, NIC0 will be allocated to that interface.</li><li>If there is an organisation routed or organisation isolated network connected to the virtual machine, NIC0 will be allocated to that interface.</li><li>If there is a north and a south bound interface connected to the virtual machine, NIC0 will be allocated to the north interface.</li></ol><p><strong style="line-height: 1.4285715;">NICn</strong></p><p>All remaining interfaces will be allocated incrementally from the physical design diagrams in an anti-clockwise rotation from NIC0.</p><p> </p><h2 id="EBA-IPAllocationStandards-ServerClusterIPAllocation">Server Cluster IP Allocation</h2><p>The IP addresses for vLANs that connect servers in a cluster will follow the following standard. Currently this is only required for Postgres Databases (both a heartbeat and replication vLAN).</p><p>Take the last available vLAN /24 application range available for the the vApp and reserve this for Cluster IP allocation.</p><p>For each Cluster vLAN required, allocate a /28 range from this, so 16 addresses are available. Of these the first 3 and last addresses are reserved by AWS. Take the next available addresses.</p><p>If all 16 ranges are used up, then take the next available vLAN range.</p><p> </p><p>E.g. x.y.z.0-15 for the first range,  x.y.z.4-7 for the next etc.</p><p>E.g. x.y.z.16-31 for the first range,  x.y.z.20-23 for the next etc.</p><p> </p>
                    </div>

                                        
                    
                 
                </div>             </div> 
            
        </div>     </body>
</html>
